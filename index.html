<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUNMIN | Neural Nexus & Energy Grid</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;700&family=JetBrains+Mono:wght@100;300&display=swap" rel="stylesheet">
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?3b13eecfc5fd067eb570cbf7c5c4f978";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

    <style>
        :root {
            --cyan: #00f2ff;
            --blue: #0044ff;
            --bg: #010103;
            --panel-bg: rgba(255, 255, 255, 0.03);
            --border: rgba(255, 255, 255, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background-color: var(--bg);
            color: #fff;
            font-family: 'Space Grotesk', sans-serif;
            overflow: hidden;
            height: 100vh;
        }

        /* --- 3D 渲染层 --- */
        #canvas-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1;
        }

        /* --- 漂浮小蓝点 --- */
        #floating-dots {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .floating-dot {
            position: absolute;
            width: 3px;
            height: 3px;
            background: #4A90E2;
            border-radius: 50%;
            opacity: 0.9;
            box-shadow: 0 0 8px #4A90E2, 0 0 16px rgba(74, 144, 226, 0.5);
            transition: all 0.3s ease;
        }
        
        .floating-dot.attracted {
            box-shadow: 0 0 15px #4A90E2, 0 0 30px #4A90E2;
            z-index: 15;
        }
        
        .floating-dot.attached {
            background: #4A90E2;
            box-shadow: 0 0 4px #4A90E2, 0 0 8px rgba(74, 144, 226, 0.6);
            opacity: 1;
            width: 2px;
            height: 2px;
        }
        
        .floating-dot.pulsing {
            background: #6BB6FF;
            box-shadow: 0 0 8px #6BB6FF, 0 0 16px rgba(107, 182, 255, 0.9);
            animation: pulseGlow 0.8s ease-in-out infinite alternate;
        }
        
        @keyframes pulseGlow {
            0% { 
                transform: scale(1.2);
                opacity: 1;
                box-shadow: 0 0 8px #6BB6FF, 0 0 16px rgba(107, 182, 255, 0.9);
            }
            100% { 
                transform: scale(1.8);
                opacity: 0.8;
                box-shadow: 0 0 12px #6BB6FF, 0 0 24px rgba(107, 182, 255, 1);
            }
        }
        
        /* 星星般的漂浮动画 - 减小移动范围避免进入球体 */
        @keyframes starFloat1 {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 0.7; }
            25% { transform: translate(20px, -15px) rotate(90deg); opacity: 1; }
            50% { transform: translate(-10px, -30px) rotate(180deg); opacity: 0.8; }
            75% { transform: translate(-18px, -8px) rotate(270deg); opacity: 1; }
            100% { transform: translate(0, 0) rotate(360deg); opacity: 0.7; }
        }
        
        @keyframes starFloat2 {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 0.8; }
            25% { transform: translate(-15px, 20px) rotate(90deg); opacity: 1; }
            50% { transform: translate(25px, 10px) rotate(180deg); opacity: 0.7; }
            75% { transform: translate(12px, -20px) rotate(270deg); opacity: 1; }
            100% { transform: translate(0, 0) rotate(360deg); opacity: 0.8; }
        }
        
        @keyframes starFloat3 {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 0.9; }
            25% { transform: translate(18px, 22px) rotate(90deg); opacity: 0.7; }
            50% { transform: translate(-20px, 15px) rotate(180deg); opacity: 1; }
            75% { transform: translate(8px, -22px) rotate(270deg); opacity: 0.8; }
            100% { transform: translate(0, 0) rotate(360deg); opacity: 0.9; }
        }

        /* --- UI 面板层 --- */
        .overlay {
            position: relative; z-index: 10; height: 100vh;
            display: flex; flex-direction: column; justify-content: space-between;
            padding: 40px; pointer-events: none;
        }
        .overlay * { pointer-events: auto; }

        /* --- 导航栏 --- */
        nav {
            display: flex; justify-content: space-between; align-items: flex-start;
        }
        .brand { 
            font-weight: 700; letter-spacing: 10px; font-size: 22px; color: #fff; text-decoration: none; 
            position: relative;
        }
        
        /* 处理小写i字母，隐藏原点并添加闪烁绿点 */
        .i-letter {
            position: relative;
            color: #fff;
        }
        
        .i-letter::before {
            content: 'ı'; /* 使用无点的i字符 */
            position: absolute;
            left: 0;
            top: 0;
            color: #fff;
        }
        
        .i-letter::after {
            content: '•';
            position: absolute;
            top: -3px;
            left: 50%;
            transform: translateX(-50%);
            color: #00ff00;
            font-size: 12px;
            animation: blinkGreen 1.5s infinite;
            font-weight: 700;
        }
        
        /* 隐藏原始的i字符 */
        .i-letter {
            color: transparent;
        }
        
        @keyframes blinkGreen {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }
        
        .login-btn { 
            font-family: 'JetBrains Mono', monospace; 
            font-size: 12px; 
            color: #fff; 
            background: transparent;
            border: 0.5px solid var(--cyan); 
            padding: 8px 16px; 
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .login-btn:hover {
            background: var(--cyan);
            color: #000;
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.5);
        }

        /* --- 登录弹窗样式 --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-container {
            background: rgba(1, 1, 3, 0.95);
            border: 1px solid var(--border);
            border-radius: 8px;
            width: 90%;
            max-width: 450px;
            backdrop-filter: blur(20px);
            box-shadow: 0 20px 60px rgba(0, 242, 255, 0.1);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px 30px 20px;
            border-bottom: 1px solid var(--border);
        }
        
        .modal-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 18px;
            font-weight: 700;
            color: var(--cyan);
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            font-size: 24px;
            cursor: pointer;
            transition: color 0.3s ease;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-close:hover {
            color: var(--cyan);
        }
        
        .modal-content {
            padding: 30px;
        }
        
        .login-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--border);
        }
        
        .tab-btn {
            flex: 1;
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            font-family: 'Space Grotesk', sans-serif;
            font-size: 14px;
            font-weight: 500;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .tab-btn.active {
            color: var(--cyan);
        }
        
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--cyan);
        }
        
        .form-container {
            display: none;
        }
        
        .form-container.active {
            display: block;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            color: var(--cyan);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .input-group input,
        .input-group textarea {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 12px 15px;
            color: #fff;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .input-group input:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: var(--cyan);
            box-shadow: 0 0 10px rgba(0, 242, 255, 0.2);
        }
        
        .input-group textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        .submit-btn {
            width: 100%;
            background: var(--cyan);
            color: #000;
            border: none;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .submit-btn:hover {
            background: #00d4e6;
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(0, 242, 255, 0.3);
        }
        
        .register-note {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
            text-align: center;
            margin-top: 15px;
            line-height: 1.4;
        }
        
        .input-error {
            display: block;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 11px;
            color: #ff4757;
            margin-top: 5px;
            min-height: 16px;
        }

        /* --- 自定义提示弹窗样式 --- */
        .alert-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1100;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .alert-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .alert-container {
            background: rgba(1, 1, 3, 0.98);
            border: 1px solid var(--cyan);
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
            padding: 30px;
            backdrop-filter: blur(20px);
            box-shadow: 0 20px 60px rgba(0, 242, 255, 0.2);
            text-align: center;
            transform: scale(0.8);
            transition: transform 0.3s ease;
        }
        
        .alert-overlay.active .alert-container {
            transform: scale(1);
        }
        
        .alert-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 700;
        }
        
        .alert-icon.error {
            background: rgba(255, 71, 87, 0.2);
            border: 2px solid #ff4757;
            color: #ff4757;
        }
        
        .alert-icon.success {
            background: rgba(46, 213, 115, 0.2);
            border: 2px solid #2ed573;
            color: #2ed573;
        }
        
        .alert-icon.info {
            background: rgba(0, 242, 255, 0.2);
            border: 2px solid var(--cyan);
            color: var(--cyan);
        }
        
        .alert-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 16px;
            font-weight: 700;
            color: #fff;
            margin: 0 0 15px 0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .alert-message {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.5;
            margin: 0 0 25px 0;
        }
        
        .alert-close {
            background: var(--cyan);
            color: #000;
            border: none;
            border-radius: 4px;
            padding: 12px 30px;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 100px;
        }
        
        .alert-close:hover {
            background: #00d4e6;
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(0, 242, 255, 0.3);
        }

        /* --- 主标题区 --- */
        .hero-main { 
            max-width: 1200px; 
            text-align: center;
            margin: 0 auto;
        }
        
        .main-title {
            font-size: clamp(36px, 6vw, 60px);
            font-weight: 600;
            color: #ffffff;
            line-height: 1.1;
            margin-bottom: 40px;
            letter-spacing: -1px;
            font-family: 'Space Grotesk', sans-serif;
        }
        
        .subtitle-group {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 50px;
            flex-wrap: wrap;
        }
        
        .subtitle-item {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 16px;
            font-weight: 400;
            color: rgba(255, 255, 255, 0.8);
            letter-spacing: 0.5px;
        }
        
        .subtitle-separator {
            color: var(--cyan);
            font-size: 14px;
            font-weight: 700;
        }
        
        .description-text {
            max-width: 700px;
            margin: 0 auto 60px auto;
        }
        
        .description-text p {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 18px;
            font-weight: 300;
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.6;
            margin: 0;
        }

        /* --- 底部数据终端 --- */
        .footer-terminal {
            display: flex; gap: 40px; align-items: flex-end;
        }
        .stat-box { background: var(--panel-bg); padding: 20px 30px; backdrop-filter: blur(10px); }
        .stat-label { font-family: 'JetBrains Mono', monospace; font-size: 9px; color: var(--cyan); margin-bottom: 10px; display: block; }
        .stat-value { font-size: 24px; font-weight: 700; }

        /* --- 按钮重新设计 --- */
        .btn-core {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 16px 32px;
            background: var(--cyan);
            color: #000;
            text-decoration: none;
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 600;
            font-size: 14px;
            letter-spacing: 1px;
            text-transform: uppercase;
            border-radius: 6px;
            transition: all 0.3s ease;
            border: 2px solid var(--cyan);
        }
        
        .btn-core:hover {
            background: transparent;
            color: var(--cyan);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 242, 255, 0.3);
        }
        
        .btn-arrow {
            font-size: 16px;
            transition: transform 0.3s ease;
        }
        
        .btn-core:hover .btn-arrow {
            transform: translateX(4px);
        }

    </style>
</head>
<body>

    <div id="canvas-container"></div>
    
    <!-- 漂浮的小蓝点 -->
    <div id="floating-dots"></div>

    <!-- 登录弹窗 -->
    <div id="loginModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title">Access Control</h2>
                <button class="modal-close" onclick="closeLoginModal()">&times;</button>
            </div>
            
            <div class="modal-content">
                <div class="login-tabs">
                    <button class="tab-btn active" onclick="switchTab('login')">Login</button>
                    <button class="tab-btn" onclick="switchTab('register')">Register</button>
                </div>
                
                <!-- 登录表单 -->
                <div id="loginForm" class="form-container active">
                    <form onsubmit="handleLogin(event)">
                        <div class="input-group">
                            <label for="loginUsername">Username</label>
                            <input type="text" id="loginUsername" name="username" required>
                            <span class="input-error" id="usernameError"></span>
                        </div>
                        <div class="input-group">
                            <label for="loginPassword">Password</label>
                            <input type="password" id="loginPassword" name="password" required>
                        </div>
                        <button type="submit" class="submit-btn">Access System</button>
                    </form>
                </div>
                
                <!-- 注册表单 -->
                <div id="registerForm" class="form-container">
                    <form onsubmit="handleRegister(event)">
                        <div class="input-group">
                            <label for="regUsername">Username</label>
                            <input type="text" id="regUsername" name="username" required>
                            <span class="input-error" id="regUsernameError"></span>
                        </div>
                        <div class="input-group">
                            <label for="regEmail">Email</label>
                            <input type="email" id="regEmail" name="email" required>
                        </div>
                        <div class="input-group">
                            <label for="regPassword">Password</label>
                            <input type="password" id="regPassword" name="password" required>
                        </div>
                        <div class="input-group">
                            <label for="regReason">Application Reason</label>
                            <textarea id="regReason" name="reason" placeholder="Please explain why you need access to SUNMIN systems..." required></textarea>
                        </div>
                        <button type="submit" class="submit-btn">Submit Application</button>
                        <p class="register-note">Applications are reviewed manually. You will be notified once approved.</p>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- 自定义提示弹窗 -->
    <div id="customAlert" class="alert-overlay">
        <div class="alert-container">
            <div class="alert-icon" id="alertIcon">
                <span id="alertIconSymbol">!</span>
            </div>
            <div class="alert-content">
                <h3 class="alert-title" id="alertTitle">System Alert</h3>
                <p class="alert-message" id="alertMessage">Message content</p>
            </div>
            <button class="alert-close" onclick="closeCustomAlert()">OK</button>
        </div>
    </div>

    <div class="overlay">
        <nav>
            <a href="#" class="brand">SUNM<span class="i-letter">i</span>N</a>
            <button class="login-btn" onclick="openLoginModal()">Login</button>
        </nav>

        <div class="hero-main">
            <div class="subtitle-group">
                <span class="subtitle-item">AI</span>
                <span class="subtitle-separator">•</span>
                <span class="subtitle-item">Advanced Robotics</span>
                <span class="subtitle-separator">•</span>
                <span class="subtitle-item">Sustainable Energy</span>
            </div>
            
            <h1 class="main-title">Engineering the Intelligent Future</h1>
            
            <div class="description-text">
                <p>SunMin integrates high-dimensional neural networks with next-generation fusion energy technology, building the backbone of autonomous evolving machine civilization to provide ultimate computational power and energy support globally.</p>
            </div>
        </div>

        <div class="footer-terminal">
            <div class="stat-box">
                <span class="stat-label">NEURAL SYNC</span>
                <div class="stat-value">0.0012<small style="font-size: 10px;">ms</small></div>
            </div>
            <div class="stat-box">
                <span class="stat-label">ENERGY YIELD</span>
                <div class="stat-value">94.8<small style="font-size: 10px;">GW/s</small></div>
            </div>
            <div class="stat-box" style="flex-grow: 1; text-align: right;">
                <span class="stat-label">ACTIVE NODES</span>
                <div class="stat-value" id="activeNodes">156,847</div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // --- 1. Active Nodes 随机数字变化 ---
        function updateActiveNodes() {
            const activeNodesElement = document.getElementById('activeNodes');
            let currentNodes = 156847; // 初始值
            
            function generateRandomNodes() {
                // 每次变化幅度在当前值的-5%到+5%之间
                const changePercent = (Math.random() - 0.5) * 0.1; // -0.05 到 0.05
                const change = Math.floor(currentNodes * changePercent);
                
                // 更新当前值
                currentNodes += change;
                
                // 确保数值在8万到30万范围内
                currentNodes = Math.max(80000, Math.min(300000, currentNodes));
                
                // 格式化数字，添加千位分隔符
                const formattedNumber = currentNodes.toLocaleString();
                activeNodesElement.textContent = formattedNumber;
                
                // 设置下次更新时间（1-9秒随机）
                const nextUpdateTime = 1000 + Math.random() * 8000; // 1-9秒
                setTimeout(generateRandomNodes, nextUpdateTime);
            }
            
            // 开始更新
            generateRandomNodes();
        }
        
        // 启动Active Nodes更新
        updateActiveNodes();

        // --- 2.5. 星星般的小蓝点与球体融合效果 ---
        function createStarDotsSystem() {
            const container = document.getElementById('floating-dots');
            const animations = ['starFloat1', 'starFloat2', 'starFloat3'];
            let activeDots = [];
            let globe3D = null; // 3D球体引用
            let lastAttractionTime = 0; // 上次吸引时间
            let nextAttractionDelay = 2000 + Math.random() * 3000; // 2-5秒的初始延迟
            
            function createDot() {
                const dot = document.createElement('div');
                dot.className = 'floating-dot';
                
                // 在球体范围外生成点
                let startX, startY;
                const sphereCenterX = window.innerWidth / 2;
                const sphereCenterY = window.innerHeight / 2;
                const sphereRadius = 250; // 球体显示半径 + 安全边距
                
                do {
                    startX = Math.random() * (window.innerWidth - 50) + 25;
                    startY = Math.random() * (window.innerHeight - 50) + 25;
                    
                    // 计算到球心的距离
                    const distanceToCenter = Math.sqrt(
                        Math.pow(startX - sphereCenterX, 2) + 
                        Math.pow(startY - sphereCenterY, 2)
                    );
                    
                    // 如果距离大于球体半径，则位置有效
                    if (distanceToCenter > sphereRadius) {
                        break;
                    }
                } while (true);
                
                dot.style.left = startX + 'px';
                dot.style.top = startY + 'px';
                
                // 随机星星动画
                const animationType = animations[Math.floor(Math.random() * animations.length)];
                const duration = 15 + Math.random() * 10; // 15-25秒的缓慢移动
                
                dot.style.animation = `${animationType} ${duration}s linear infinite`;
                container.appendChild(dot);
                activeDots.push(dot);
                
                // 降低被球体吸引的概率，并且增加延迟
                const willBeAttracted = Math.random() < 0.25; // 降低到25%
                if (willBeAttracted) {
                    const attractTime = 5 + Math.random() * 10; // 5-15秒后开始吸引
                    setTimeout(() => {
                        attractToSphere(dot);
                    }, attractTime * 1000);
                } else {
                    // 60秒后自然消失（如果没被吸引）
                    setTimeout(() => {
                        if (dot.parentNode && !dot.classList.contains('attracted')) {
                            removeDot(dot);
                        }
                    }, 60000);
                }
            }
            
            function attractToSphere(dot) {
                if (!dot.parentNode || dot.classList.contains('attracted')) return;
                
                // 检查是否到了可以吸引的时间
                const currentTime = Date.now();
                if (currentTime - lastAttractionTime < nextAttractionDelay) {
                    return; // 还没到时间，不执行吸引
                }
                
                // 更新时间记录
                lastAttractionTime = currentTime;
                nextAttractionDelay = 2000 + Math.random() * 3000; // 设置下次2-5秒的延迟
                
                dot.classList.add('attracted');
                dot.style.animation = 'none';
                
                // 获取当前位置
                const rect = dot.getBoundingClientRect();
                const currentX = rect.left + rect.width / 2;
                const currentY = rect.top + rect.height / 2;
                
                // 球体中心
                const sphereCenterX = window.innerWidth / 2;
                const sphereCenterY = window.innerHeight / 2;
                
                // 计算球体表面位置
                const angle = Math.random() * Math.PI * 2;
                const sphereRadius = 200;
                const targetX = sphereCenterX + Math.cos(angle) * sphereRadius;
                const targetY = sphereCenterY + Math.sin(angle) * sphereRadius;
                
                // 设置吸引动画
                dot.style.position = 'fixed';
                dot.style.left = currentX + 'px';
                dot.style.top = currentY + 'px';
                dot.style.transition = 'all 2.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                dot.style.zIndex = '15';
                
                // 开始吸引
                requestAnimationFrame(() => {
                    dot.style.left = targetX + 'px';
                    dot.style.top = targetY + 'px';
                    dot.style.transform = 'scale(0.8)';
                });
                
                // 吸附到球体
                setTimeout(() => {
                    if (dot.parentNode && dot.classList.contains('attracted')) {
                        // 立即停止所有过渡和动画
                        dot.style.transition = 'none';
                        dot.style.animation = 'none';
                        
                        // 将点添加到3D球体系统中，并变成球的颜色
                        dot.classList.add('attached');
                        addDotToSphere(dot, targetX, targetY);
                        
                        // 不再设置移除定时器，点永久保留在球上
                    }
                }, 2500);
            }
            
            function removeDotFromSphere(dot) {
                // 这个函数现在只用于清理，附着的点不再主动移除
                attachedDots = attachedDots.filter(dotData => dotData.element !== dot);
                
                if (dot.parentNode) {
                    dot.parentNode.removeChild(dot);
                }
            }
            
            function removeDot(dot) {
                if (dot.parentNode) {
                    dot.parentNode.removeChild(dot);
                    activeDots = activeDots.filter(d => d !== dot);
                }
            }
            
            // 持续生成星星点，但控制吸引频率
            setInterval(createDot, 800);
            
            // 初始生成适量的点
            for(let i = 0; i < 15; i++) {
                setTimeout(createDot, i * 300);
            }
        }
        
        // 启动星星点系统
        createStarDotsSystem();

        // --- 3. 增强版 3D 神经网络 ---
        let scene, camera, renderer, globe, points, attachedDots = [];
        let pulsingRegions = []; // 存储正在闪烁的区域
        let sphereSegments = []; // 存储球体网格片段
        
        // 球体旋转速度控制
        let baseRotationSpeedY = 0.002;
        let baseRotationSpeedX = 0.001;
        let currentSpeedMultiplier = 1;
        let targetSpeedMultiplier = 1;
        let speedTransitionProgress = 0;
        let nextSpeedChangeTime = Date.now() + 3000 + Math.random() * 5000; // 3-8秒后第一次变速

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 2000);
            camera.position.z = 900;

            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            // 创建球体网络
            const geometry = new THREE.SphereGeometry(400, 40, 40);
            const wireMaterial = new THREE.MeshBasicMaterial({
                color: 0x4A90E2,
                wireframe: true,
                transparent: true,
                opacity: 0.1
            });
            globe = new THREE.Mesh(geometry, wireMaterial);
            scene.add(globe);

            // 增加发光粒子节点
            const pGeometry = new THREE.BufferGeometry();
            const pCount = 1500;
            const pos = [];
            for(let i=0; i<pCount; i++) {
                const r = 400;
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.acos(2 * Math.random() - 1);
                pos.push(r*Math.sin(phi)*Math.cos(theta), r*Math.sin(phi)*Math.sin(theta), r*Math.cos(phi));
            }
            pGeometry.setAttribute('position', new THREE.Float32BufferAttribute(pos, 3));
            const pMaterial = new THREE.PointsMaterial({ size: 2, color: 0x4A90E2, transparent: true, opacity: 0.8 });
            points = new THREE.Points(pGeometry, pMaterial);
            globe.add(points);

            // 添加环境装饰点
            const starGeo = new THREE.BufferGeometry();
            const starPos = [];
            for(let i=0; i<3000; i++) starPos.push((Math.random()-0.5)*2000, (Math.random()-0.5)*2000, (Math.random()-0.5)*2000);
            starGeo.setAttribute('position', new THREE.Float32BufferAttribute(starPos, 3));
            const starMat = new THREE.PointsMaterial({ size: 1, color: 0xffffff, transparent: true, opacity: 0.3 });
            scene.add(new THREE.Points(starGeo, starMat));
            
            // 启动随机区域闪烁系统
            startRandomPulsing();
        }
        
        function startRandomPulsing() {
            function createPulsingRegion() {
                if (attachedDots.length < 3) return; // 至少需要3个附着点才能形成区域
                
                // 随机选择一个中心点
                const centerDot = attachedDots[Math.floor(Math.random() * attachedDots.length)];
                if (!centerDot.element || !centerDot.element.parentNode) return;
                
                // 找到附近的点（基于3D距离）
                const nearbyDots = attachedDots.filter(dot => {
                    if (!dot.element || !dot.element.parentNode || dot === centerDot) return false;
                    
                    const distance = centerDot.spherePos.distanceTo(dot.spherePos);
                    return distance < 200; // 距离阈值
                });
                
                // 随机选择2-5个附近的点
                const regionSize = Math.min(nearbyDots.length, Math.floor(Math.random() * 4) + 2);
                const selectedDots = [centerDot];
                
                for (let i = 0; i < regionSize && i < nearbyDots.length; i++) {
                    const randomIndex = Math.floor(Math.random() * nearbyDots.length);
                    const dot = nearbyDots.splice(randomIndex, 1)[0];
                    selectedDots.push(dot);
                }
                
                // 开始闪烁
                const pulsingDuration = 1000 + Math.random() * 7000; // 1-8秒
                const regionId = Date.now() + Math.random();
                
                selectedDots.forEach(dot => {
                    if (dot.element && dot.element.parentNode) {
                        dot.element.classList.add('pulsing');
                        dot.pulsingRegionId = regionId;
                    }
                });
                
                pulsingRegions.push({
                    id: regionId,
                    dots: selectedDots,
                    endTime: Date.now() + pulsingDuration
                });
                
                // 停止闪烁
                setTimeout(() => {
                    selectedDots.forEach(dot => {
                        if (dot.element && dot.element.parentNode && dot.pulsingRegionId === regionId) {
                            dot.element.classList.remove('pulsing');
                            delete dot.pulsingRegionId;
                        }
                    });
                    
                    // 从活跃区域列表中移除
                    pulsingRegions = pulsingRegions.filter(region => region.id !== regionId);
                }, pulsingDuration);
            }
            
            // 每3-8秒创建一个新的闪烁区域
            function scheduleNextPulsing() {
                const nextInterval = 3000 + Math.random() * 5000;
                setTimeout(() => {
                    createPulsingRegion();
                    scheduleNextPulsing();
                }, nextInterval);
            }
            
            scheduleNextPulsing();
        }

        function animate() {
            requestAnimationFrame(animate);
            
            // 处理球体旋转速度变化
            updateRotationSpeed();
            
            // 应用当前速度
            globe.rotation.y += baseRotationSpeedY * currentSpeedMultiplier;
            globe.rotation.x += baseRotationSpeedX * currentSpeedMultiplier;
            
            // 更新吸附点的位置，让它们跟随球体旋转
            updateAttachedDots();
            
            renderer.render(scene, camera);
        }
        
        function updateRotationSpeed() {
            const currentTime = Date.now();
            
            // 检查是否到了变速时间
            if (currentTime >= nextSpeedChangeTime) {
                // 设置新的目标速度（1-5倍）
                targetSpeedMultiplier = 1 + Math.random() * 4; // 1-5倍速度
                speedTransitionProgress = 0;
                
                // 设置下次变速时间（当前加速持续2-5秒，然后恢复正常，再等待3-8秒）
                const accelerationDuration = 2000 + Math.random() * 3000; // 2-5秒加速
                const normalDuration = 1000; // 1秒恢复到正常
                const waitDuration = 3000 + Math.random() * 5000; // 3-8秒等待
                
                // 如果当前是正常速度，则加速
                if (Math.abs(currentSpeedMultiplier - 1) < 0.1) {
                    nextSpeedChangeTime = currentTime + accelerationDuration;
                } else {
                    // 如果当前是加速状态，则恢复正常
                    targetSpeedMultiplier = 1;
                    nextSpeedChangeTime = currentTime + normalDuration + waitDuration;
                }
            }
            
            // 平滑过渡到目标速度
            if (Math.abs(currentSpeedMultiplier - targetSpeedMultiplier) > 0.01) {
                const transitionSpeed = 0.02; // 过渡速度
                if (currentSpeedMultiplier < targetSpeedMultiplier) {
                    currentSpeedMultiplier = Math.min(targetSpeedMultiplier, currentSpeedMultiplier + transitionSpeed);
                } else {
                    currentSpeedMultiplier = Math.max(targetSpeedMultiplier, currentSpeedMultiplier - transitionSpeed);
                }
            }
        }
        
        function updateAttachedDots() {
            attachedDots.forEach(dotData => {
                updateSingleDot(dotData);
            });
        }
        
        function addDotToSphere(dotElement, screenX, screenY) {
            // 将屏幕坐标转换为3D球体表面坐标
            const vector = new THREE.Vector3(
                (screenX / window.innerWidth) * 2 - 1,
                -(screenY / window.innerHeight) * 2 + 1,
                0.5
            );
            
            vector.unproject(camera);
            vector.sub(globe.position).normalize();
            vector.multiplyScalar(400); // 球体半径
            
            // 存储点的3D位置信息
            const dotData = {
                element: dotElement,
                spherePos: vector.clone()
            };
            
            attachedDots.push(dotData);
            
            // 停止所有自身动画和过渡效果
            dotElement.style.animation = 'none';
            dotElement.style.transition = 'none';
            dotElement.style.position = 'fixed';
            dotElement.style.zIndex = '5';
            dotElement.classList.add('attached');
            
            // 立即设置为球体表面位置
            updateSingleDot(dotData);
        }
        
        function updateSingleDot(dotData) {
            if (dotData.element && dotData.element.parentNode) {
                // 计算3D球体上的点在屏幕上的位置
                const vector = new THREE.Vector3(
                    dotData.spherePos.x,
                    dotData.spherePos.y,
                    dotData.spherePos.z
                );
                
                // 应用球体的旋转
                vector.applyMatrix4(globe.matrixWorld);
                
                // 转换为屏幕坐标
                vector.project(camera);
                
                const screenX = (vector.x * 0.5 + 0.5) * window.innerWidth;
                const screenY = (-vector.y * 0.5 + 0.5) * window.innerHeight;
                
                // 更新DOM元素位置（无过渡动画）
                dotData.element.style.left = screenX + 'px';
                dotData.element.style.top = screenY + 'px';
                
                // 根据z深度调整透明度，但保持小尺寸
                const depth = (vector.z + 1) / 2; // 0-1范围
                const baseOpacity = 0.6 + depth * 0.4;
                const baseScale = 0.8 + depth * 0.2; // 更小的缩放范围，与球体粒子一致
                
                // 如果不在闪烁状态，应用正常的深度效果
                if (!dotData.element.classList.contains('pulsing')) {
                    dotData.element.style.opacity = baseOpacity;
                    dotData.element.style.transform = `scale(${baseScale})`;
                }
                // 闪烁状态下，深度只影响透明度，缩放由CSS动画控制
                else {
                    dotData.element.style.opacity = baseOpacity * 0.9;
                }
            }
        }

        init(); animate();
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // --- 登录弹窗功能 ---
        function openLoginModal() {
            document.getElementById('loginModal').classList.add('active');
        }
        
        function closeLoginModal() {
            document.getElementById('loginModal').classList.remove('active');
            clearErrors();
        }
        
        function switchTab(tab) {
            // 切换标签按钮状态
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // 切换表单显示
            document.querySelectorAll('.form-container').forEach(form => form.classList.remove('active'));
            document.getElementById(tab + 'Form').classList.add('active');
            
            // 清除错误信息
            clearErrors();
        }
        
        function clearErrors() {
            document.querySelectorAll('.input-error').forEach(error => error.textContent = '');
            document.querySelectorAll('input, textarea').forEach(input => {
                input.style.borderColor = 'var(--border)';
            });
        }
        
        function validateUsername(username) {
            const regex = /^[a-zA-Z0-9]+$/;
            return regex.test(username);
        }
        
        function showError(inputId, message) {
            const input = document.getElementById(inputId);
            const errorElement = document.querySelector(`#${inputId} + .input-error`);
            if (errorElement) {
                errorElement.textContent = message;
            }
            input.style.borderColor = '#ff4757';
        }
        
        function handleLogin(event) {
            event.preventDefault();
            clearErrors();
            
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            // 验证用户名格式
            if (!validateUsername(username)) {
                showError('loginUsername', 'Username must contain only letters and numbers');
                return;
            }
            
            // 模拟登录失败（所有账号都登录错误）
            setTimeout(() => {
                showCustomAlert('error', 'Access Denied', 'Invalid credentials. Access to SUNMIN systems is restricted.');
            }, 500);
        }
        
        function handleRegister(event) {
            event.preventDefault();
            clearErrors();
            
            const username = document.getElementById('regUsername').value.trim();
            const email = document.getElementById('regEmail').value.trim();
            const password = document.getElementById('regPassword').value;
            const reason = document.getElementById('regReason').value.trim();
            
            // 验证用户名格式
            if (!validateUsername(username)) {
                showError('regUsername', 'Username must contain only letters and numbers');
                return;
            }
            
            // 模拟提交成功
            setTimeout(() => {
                showCustomAlert('success', 'Application Submitted', 
                    `Registration application for "${username}" has been submitted successfully. You will be notified once your application is reviewed and approved.`);
                closeLoginModal();
                
                // 清空表单
                document.getElementById('registerForm').querySelector('form').reset();
            }, 500);
        }
        
        // 自定义提示弹窗
        function showCustomAlert(type, title, message) {
            const alertOverlay = document.getElementById('customAlert');
            const alertIcon = document.getElementById('alertIcon');
            const alertIconSymbol = document.getElementById('alertIconSymbol');
            const alertTitle = document.getElementById('alertTitle');
            const alertMessage = document.getElementById('alertMessage');
            
            // 设置图标和样式
            alertIcon.className = `alert-icon ${type}`;
            switch(type) {
                case 'error':
                    alertIconSymbol.textContent = '✕';
                    break;
                case 'success':
                    alertIconSymbol.textContent = '✓';
                    break;
                case 'info':
                    alertIconSymbol.textContent = 'i';
                    break;
            }
            
            alertTitle.textContent = title;
            alertMessage.textContent = message;
            
            alertOverlay.classList.add('active');
        }
        
        function closeCustomAlert() {
            document.getElementById('customAlert').classList.remove('active');
        }
        
        // 点击弹窗外部关闭
        document.getElementById('loginModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeLoginModal();
            }
        });
        
        document.getElementById('customAlert').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCustomAlert();
            }
        });
        
        // ESC键关闭弹窗
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeLoginModal();
                closeCustomAlert();
            }
        });
    </script>
</body>
</html>